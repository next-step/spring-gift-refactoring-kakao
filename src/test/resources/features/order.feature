# language: ko
기능: 주문 처리
  인증된 회원만 주문할 수 있으며, 주문 시 재고와 포인트가 차감된다.

  배경:
    먼저 "교환권" 카테고리가 존재한다
    그리고 해당 카테고리에 가격이 4500원인 "아이스아메리카노" 상품이 존재한다
    그리고 해당 상품에 수량이 10인 "L 사이즈" 옵션이 존재한다
    그리고 포인트가 100000인 "buyer@test.com" 회원이 등록되어 있다

  시나리오: 충분한 포인트와 재고가 있을 때 주문하면 201을 반환한다
    만약 인증 헤더를 포함하여 "L 사이즈" 옵션 1개를 주문 요청한다
    그러면 응답 상태 코드가 201이다
    그리고 응답 바디에 "optionId" 필드가 존재한다

  시나리오: 재고보다 많은 수량을 주문하면 500을 반환한다
    만약 인증 헤더를 포함하여 "L 사이즈" 옵션 99개를 주문 요청한다
    그러면 응답 상태 코드가 500이다

  시나리오: 포인트가 부족할 때 주문하면 500을 반환한다
    먼저 포인트가 100인 "poor@test.com" 회원이 등록되어 있다
    만약 인증 헤더를 포함하여 "L 사이즈" 옵션 1개를 주문 요청한다
    그러면 응답 상태 코드가 500이다

  시나리오: 유효하지 않은 토큰으로 주문하면 401을 반환한다
    만약 유효하지 않은 토큰으로 주문 요청한다
    그러면 응답 상태 코드가 401이다
