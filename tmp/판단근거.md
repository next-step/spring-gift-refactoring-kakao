# 판단근거

## 스타일 정리

### @author/@since Javadoc 제거
8개 파일에만 있고 나머지 22개+ 파일에는 없음. 다수파에 맞춰 제거.
git 이력으로 저자 추적이 되니까 코드에 @author 넣을 이유가 없음.

### @Autowired 제거
4개 파일에만 붙어있고 나머지는 다 생략하고 있음.
Spring 4.3부터 생성자가 1개면 자동 주입되니까 명시할 필요 없음.

### Entity 필드 빈 줄 통일
Member.java만 필드 사이에 빈 줄이 있음. 다른 엔티티(Product, Option, Order, Category, Wish)는 다 빈 줄 없음.

### Collectors.toList() -> .toList()
OptionController에서만 `Collectors.toList()` 사용. CategoryController는 `.toList()` 사용.
`.toList()`는 불변 리스트를 반환하지만, 반환된 리스트를 수정하는 코드가 없으니 동작 차이 없음.

---

## 불필요한 코드 제거

### OrderController.wishRepository
- grep 결과: 선언, 생성자 파라미터, 할당만 있고 실제 호출 0건
- 주석에 `// 6. cleanup wish`가 있어서 의도는 있었지만 미구현 상태
- git blame: 초기 세팅 커밋(`55ca9e43`)에서 추가됨, wish cleanup 관련 별도 설명 없음
- 판단: 제거. 나중에 cleanup wish 기능을 구현할 때 다시 추가하면 됨

### OptionController의 Collectors import
`.toList()`로 바꾸면 Collectors 쓰는 곳이 없어지니까 import도 제거.

---

## 서비스 계층 추출

### OrderController -> OrderService
Controller에 옵션 검증, 재고 차감, 포인트 차감, 주문 저장, 카카오 알림이 전부 들어있었음.
이건 하나의 트랜잭션으로 묶여야 하는 도메인 로직이라서 Service로 옮김.
Controller는 인증 확인 + Service 호출 + HTTP 응답 변환만 담당.
옵션 미존재 시 Controller의 `orElse(null)` 패턴을 Service에서 `orElseThrow`로 바꾸고 Controller에서 catch해서 404 반환. 외부 동작은 동일.
기존 테스트 7개를 Service 모킹 방식으로 전환, 전부 통과.

### MemberController -> MemberService
이메일 중복 검사, 회원 생성, 비밀번호 비교, 토큰 발급이 Controller에 있었음.
회원 가입 규칙이랑 인증 로직은 HTTP 계층이랑 상관없는 도메인 규칙이니까 Service로 옮김.

### KakaoAuthController -> KakaoAuthService
OAuth URL 생성, 토큰 교환, 사용자 정보 조회, 회원 자동 등록, 토큰 관리 전부 Controller에 있었음.
외부 API 호출이랑 회원 등록 로직은 도메인 로직이니까 Service로 옮김.

### OptionController -> OptionService
옵션명 검증, 중복 검사, "상품에 옵션 1개 이상 있어야 한다"는 제약이 Controller에 있었음.
도메인 불변 규칙이니까 Service로 옮김.

### WishController -> WishService
상품 존재 확인, 중복 위시 방지, 소유자 권한 확인이 Controller에 있었음.
도메인 규칙이니까 Service로 옮김.
addWish의 200(기존)/201(신규) 응답 구분을 위해 `AddWishResult` 레코드 사용.

### ProductController / AdminProductController -> ProductService
상품명 검증이랑 카테고리 검증이 두 컨트롤러에서 중복되고 있었음.
Service로 뽑아서 공유. API는 `allowKakao=false`, Admin은 `allowKakao=true`로 기존 동작 유지.
Admin의 폼 렌더링 로직은 프레젠테이션이니까 Controller에 남김.

### AdminMemberController -> MemberService 재사용
이메일 중복 검사가 MemberController.register()랑 똑같은 로직이었음.
MemberService에 Admin용 메서드(getAllMembers, getMember, createMember, updateMember, chargePoint, deleteMember) 추가해서 재사용.

### CategoryController -> CategoryService
비즈니스 로직은 거의 없지만 프로젝트 전체의 Controller-Service 패턴 일관성을 위해 추출.
