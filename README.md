# spring-gift-refactoring

## 기능 요구 사항
이번 단계의 목표는 작동을 바꾸기 쉬운 상태를 만드는 것이다.
즉, 구조 변경을 통해 변경 난이도를 낮추되 작동은 유지한다.

- [x] 스타일 정리
  - 프로젝트 전반의 스타일 불일치를 찾아 일관되게 정리한다.
  - 스타일 정리로 인해 작동이 바뀌지 않아야 한다.
- [x] 불필요한 코드 제거(작동 변경 없음
  - IDE 또는 정적 분석 도구가 "미사용"으로 표시하는 항목을 제거할 수 있다.
  - 단, 삭제 전에 반드시 근거를 확인한다.
    - 주변 주석 또는 TODO에 의도가 있는가
    - git blame으로 누가 왜 추가했는가
    - 이후 단계(작동 변경)와 충돌하지 않는가
- [x] 서비스 계층 추출(구조 변경, 작동 변경 없음)
  - Controller의 비즈니스 로직을 Service로 이동한다.
  - Controller는 요청 검증과 위임만 담당하도록 얇게 만든다.
  - 이 단계에서는 신규 기능을 추가하지 않는다.
- [x] 테스트 코드 작성
  - 단위 테스트 작성
  - 인수 테스트 작성

## 테스트 실행 방법

### 전체 테스트 실행
```bash
./gradlew test
```

### 단위테스트만 실행
```bash
./gradlew test --tests "gift.category.*Test" --tests "gift.member.*Test" --tests "gift.product.*Test" --tests "gift.option.*Test" --tests "gift.wish.*Test" --tests "gift.order.*Test"
```

### 인수테스트만 실행
```bash
./gradlew test --tests "gift.acceptance.*"
```

### 특정 도메인 인수테스트 실행
```bash
./gradlew test --tests "gift.acceptance.CategoryAcceptanceTest"
```

## 프로그래밍 요구 사항
- 코드를 포기하지 않는다.
    AI를 쓰더라도 "행동만 맞으면 된다"로 끝내지 않는다.
    코드 품질, 복잡도, 테스트와 커버리지를 계속 확인한다.
    목표는 "AI가 다 해줌"이 아니라 "내가 더 중요한 결정을 더 많이 하는 것"이다.
- 계획 파일을 기준점으로 삼는다.
    작업은 지금 할 다음 한 가지가 명확해야 한다.
    plan 또는 README.md 체크리스트에 다음 작업이 적혀 있어야 코드 수정을 시작한다.
- TDD 루프를 유지한다.
    가능하면 Red, Green, Refactor 순서로 진행한다.
    최소 요구 사항은 "변경 후 전체 테스트 통과"다.
- 구조 변경과 작동 변경을 섞지 않는다.
    구조 변경은 구조만, 작동 변경은 작동만 다룬다.
    한 커밋에는 둘 중 하나만 담는다.
- AI가 앞서 달리면 즉시 멈춘다.
    반복과 복잡도가 늘어나거나, 요청하지 않은 작동을 추가하려 하면 즉시 중단한다.
    테스트를 회피하거나 비활성화하려는 흔적이 보이면 즉시 되돌린다.
- 한 번에 한 조각만 바꾼다.
    "다음 변경 1개"처럼 범위를 제한한다.
    AI에게도 "지금은 이것만"을 명확히 지시한다.
- 커밋은 논리 단위, 설명 가능한 diff로만 한다.
    커밋은 목적 1개로 구성한다.
    git diff를 보고 커밋 의도를 30초 안에 설명할 수 없으면 더 쪼갠다.
- AI 산출물을 그대로 믿지 않는다.
    AI는 초안을 만들 뿐, 설계와 검증 책임은 개발자에게 남는다.
    중간 결과를 자주 확인하고, 의도하지 않은 변경이 없으면 즉시 제거한다.
