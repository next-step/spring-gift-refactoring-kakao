# AI 활용 방법 보고서

> 프로젝트: spring-gift-refactoring-kakao

## 1. 개요

이 프로젝트는 2-layer 아키텍처(Controller → Repository)로 구성된 Spring Boot API를
4단계에 걸쳐 리팩터링한다. AI(Claude Code)를 활용하여 분석, 테스트 작성, 리팩터링을
수행하며, 각 단계마다 보고서를 남겨 의사결정 과정을 기록한다.

## 2. SKILL 설계

반복되는 작업 패턴을 3개의 SKILL로 정의하여 AI의 행동을 표준화했다.

| SKILL | 역할 | 산출물 |
|-------|------|--------|
| `/analyze` | 코드베이스 읽기 전용 분석 | `docs/[주제]-분석.md` |
| `/acceptance-test` | Cucumber BDD 인수 테스트 작성 | `.feature` + Step Definitions |
| `/refactor` | 보고서 선행 작성 후 코드 변경 | `docs/[주제]-리팩터링.md` + 코드 변경 |

### SKILL의 핵심 제약

- **analyze**: 소스코드 수정 금지. 근거(파일:라인) 기반 분석만 수행.
- **acceptance-test**: `src/main` 수정 금지. 블랙박스 E2E 테스트만 작성.
- **refactor**: 보고서 없이 코드 수정 금지. 대안 비교 필수. 한 번에 하나의 작업 단위만 수행.

## 3. 작업 흐름

README의 4단계 작업을 SKILL 조합으로 수행한다.

```
┌─────────────────────────────────────────────────────┐
│  1단계: 인수 테스트 작성                               │
│  /analyze  → 테스트 범위 분석 보고서                    │
│  /acceptance-test → 시나리오별 인수 테스트 작성          │
├─────────────────────────────────────────────────────┤
│  2단계: 스타일 정리                                    │
│  /analyze  → 스타일 현황 분석 보고서                    │
│  /refactor → 포매터 선정·적용 (대안 비교 포함)           │
├─────────────────────────────────────────────────────┤
│  3단계: 불필요한 코드 제거                              │
│  /analyze  → 미사용 코드 분석 보고서                    │
│  /refactor → 분석 결과 기반 코드 제거                   │
├─────────────────────────────────────────────────────┤
│  4단계: 서비스 계층 추출                                │
│  /analyze  → Controller 비즈니스 로직 분석 보고서        │
│  /refactor → Controller별 Service 추출 (반복)          │
└─────────────────────────────────────────────────────┘
```

### 각 단계의 공통 사이클

```
분석(/analyze) → 보고서 리뷰 → 실행(/refactor 또는 /acceptance-test) → 테스트 통과 확인 → 커밋
```

- 매 단계 시작 전 `/analyze`로 현황을 파악하고 보고서를 남긴다.
- 보고서를 사람이 리뷰한 후 실행 단계로 진입한다.
- `/refactor`는 코드 변경 전에 변경 계획 보고서를 먼저 작성한다.
- 코드 변경 후 반드시 인수 테스트(`./gradlew cucumberTest`)로 작동 보존을 확인한다.
